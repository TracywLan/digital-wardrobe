<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Item</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
</head>
<body>
    <%- include('../partials/_navbar.ejs') %>
    
    <div class="form-page">
        <div class="form-container">
            <a href="/wardrobe/<%= item._id %>" class="back-link">‚Üê Back to Item</a>
            
            <h1>Edit Wardrobe Item</h1>
            
            <div class="form-decorative-line"></div>

            <form action="/wardrobe/<%= item._id %>?_method=PUT" method="POST">
                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="imageUrl">Item Photo URL</label>
                        <input 
                            type="text" 
                            id="imageUrl" 
                            name="imageUrl" 
                            value="<%= item.imageUrl || '' %>"
                            placeholder="https://example.com/image.jpg"
                        >
                        <small>Paste a link to your item's photo</small>
                    </div>

                    <div class="form-group full-width">
                        <label for="name">Item Name *</label>
                        <input 
                            type="text" 
                            id="name" 
                            name="name" 
                            value="<%= item.name %>"
                            maxlength="100" 
                            required 
                            placeholder="e.g. Blue Cotton T-Shirt"
                        >
                    </div>

                    <div class="form-group">
                        <label for="category">Category *</label>
                        <select id="category" name="category" required>
                            <option value="">Select a category</option>
                            <option value="top" <%= item.category === 'top' ? 'selected' : '' %>>Top</option>
                            <option value="bottom" <%= item.category === 'bottom' ? 'selected' : '' %>>Bottom</option>
                            <option value="shoes" <%= item.category === 'shoes' ? 'selected' : '' %>>Shoes</option>
                            <option value="outerwear" <%= item.category === 'outerwear' ? 'selected' : '' %>>Outerwear</option>
                            <option value="accessory" <%= item.category === 'accessory' ? 'selected' : '' %>>Accessory</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="subtype">Sub-Category *</label>
                        
                        <select id="subtype" name="subtype" required data-saved="<%= item.subtype %>">
                            </select>
                    </div>

                    <div class="form-group">
                        <label for="color">Color *</label>
                        <select id="color" name="color" required>
                            <option value="black" <%= item.color === 'black' ? 'selected' : '' %>>‚ö´ Black</option>
                            <option value="white" <%= item.color === 'white' ? 'selected' : '' %>>‚ö™ White</option>
                            <option value="gray" <%= item.color === 'gray' ? 'selected' : '' %>>üîò Gray</option>
                            <option value="blue" <%= item.color === 'blue' ? 'selected' : '' %>>üîµ Blue</option>
                            <option value="red" <%= item.color === 'red' ? 'selected' : '' %>>üî¥ Red</option>
                            <option value="green" <%= item.color === 'green' ? 'selected' : '' %>>üü¢ Green</option>
                            <option value="brown" <%= item.color === 'brown' ? 'selected' : '' %>>üü§ Brown</option>
                            <option value="beige" <%= item.color === 'beige' ? 'selected' : '' %>>ü•Ø Beige</option>
                            <option value="navy" <%= item.color === 'navy' ? 'selected' : '' %>>üåë Navy</option>
                            <option value="pink" <%= item.color === 'pink' ? 'selected' : '' %>>üå∏ Pink</option>
                            <option value="purple" <%= item.color === 'purple' ? 'selected' : '' %>>üü£ Purple</option>
                            <option value="yellow" <%= item.color === 'yellow' ? 'selected' : '' %>>üü° Yellow</option>
                            <option value="orange" <%= item.color === 'orange' ? 'selected' : '' %>>üü† Orange</option>
                            <option value="pattern" <%= item.color === 'pattern' ? 'selected' : '' %>>üèÅ Pattern</option>
                            <option value="print" <%= item.color === 'print' ? 'selected' : '' %>>üé® Print</option>
                            <option value="multi" <%= item.color === 'multi' ? 'selected' : '' %>>üåà Multi-color</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="size">Size</label>
                        <select id="size" name="size">
                            <option value="">Not specified</option>
                            <option value="XS" <%= item.size === 'XS' ? 'selected' : '' %>>XS</option>
                            <option value="S" <%= item.size === 'S' ? 'selected' : '' %>>S</option>
                            <option value="M" <%= item.size === 'M' ? 'selected' : '' %>>M</option>
                            <option value="L" <%= item.size === 'L' ? 'selected' : '' %>>L</option>
                            <option value="XL" <%= item.size === 'XL' ? 'selected' : '' %>>XL</option>
                            <option value="XXL" <%= item.size === 'XXL' ? 'selected' : '' %>>XXL</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="brand">Brand</label>
                        <input 
                            type="text" 
                            id="brand" 
                            name="brand" 
                            value="<%= item.brand || '' %>"
                            maxlength="50" 
                            placeholder="e.g. Nike, Zara"
                        >
                    </div>

                    <div class="form-group full-width">
                        <label for="season">Best Season</label>
                        <select id="season" name="season">
                            <option value="all" <%= !item.season || item.season === 'all' ? 'selected' : '' %>>Any season</option>
                            <option value="spring" <%= item.season === 'spring' ? 'selected' : '' %>>Spring</option>
                            <option value="summer" <%= item.season === 'summer' ? 'selected' : '' %>>Summer</option>
                            <option value="fall" <%= item.season === 'fall' ? 'selected' : '' %>>Fall</option>
                            <option value="winter" <%= item.season === 'winter' ? 'selected' : '' %>>Winter</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label for="notes">Notes</label>
                        <textarea 
                            id="notes" 
                            name="notes" 
                            maxlength="500" 
                            rows="4" 
                            placeholder="Any special care instructions, occasions, etc..."
                        ><%= item.notes || '' %></textarea>
                        <small>Max 500 characters</small>
                    </div>
                </div>
                
                <div class="form-actions edit-actions">
                    <button type="submit" class="btn-primary">Update Item ‚úé</button>
                    <a href="/wardrobe/<%= item._id %>" class="btn-secondary">Cancel</a>
                </div>
            </form>

<script src="/js/wardrobe-form.js"></script>
</body>
</html>